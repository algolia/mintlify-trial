## (Optional) Set up Personalization

For effective personalization, you need to identify users across sessions.
It's best to use an identifier from your authentication,
user profile, or ecommerce service after users sign in.
For more information, see [User token](/guides/send-events/concepts/user-token/).

After getting the identifier from your system,
set it as `authenticatedUserToken` parameter.

```js JavaScript
// Get a unique, pseudonymous identifier for signed-in users
const authenticatedUserToken = getUserTokenAfterSignIn();
window.aa("setAuthenticatedUserToken", authenticatedUserToken);
```

If you can't get persistent user identifiers from your system,
you can store the anonymous user token in a cookie **after obtaining user consent**.

```js JavaScript
// If user consented
aa("init", {
  partial: true,
  useCookies: true,
});
```

If you don't use persistent user identifiers,
a new anonymous user token is generated on every page refresh.

Personalization benefits from the same click and conversion events,
plus it can use view events to enrich user profiles.

Your InstantSearch components for the search results and category pages automatically collect view events.

To capture additional view events, such as on your homepage,
add this code:

```js JavaScript
window.aa("viewedObjectIDs", {
  index: "YourIndexName",
  eventName: "Products Viewed",
  objectIDs: ["objectID-1"],
});
```