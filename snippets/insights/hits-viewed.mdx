<CodeGroup>

```diff Vamilla JavaScript
index.search('query', { /* ... */ }).then(({ hits, queryID }) => {
    const container = document.querySelector('<your-selector>');
    container.innerHTML = `...`

+  dataLayer.push({ event: 'Hits Viewed' });
});
```

```js InstantSearch.js
const search = instantsearch({
    insights: {
    onEvent(event) {
        const { widgetType, eventType, payload, hits } = event;

        if (widgetType === 'ais.hits' && eventType === 'view') {
        dataLayer.push({ event: 'Hits Viewed' });
        }
    }
    },
});
```

```jsx React InstantSearch
<InstantSearch
    insights={{
    onEvent(event) {
        const { widgetType, eventType, payload, hits } = event;

        if (widgetType === 'ais.hits' && eventType === 'view') {
        dataLayer.push({ event: 'Hits Viewed' });
        }
    }
    }}
/>
```

```vue Vue InstantSearch
<!-- Required: Vue InstantSearch >= 3.7.0 -->
<template>
    <ais-instant-search
    :index-name="<index-name>"
    :search-client="searchClient"
    :middlewares="middlewares"
    >
    <!-- widgets -->
    </ais-instant-search>
</template>

<script>
import {
    createInsightsMiddleware,
} from 'instantsearch.js/es/middlewares';

const insightsMiddleware = createInsightsMiddleware({
    insightsClient: null, // or `window.aa`
    onEvent(event) {
    const { widgetType, eventType, payload, hits } = event;

    if (widgetType === 'ais.hits' && eventType === 'view') {
        dataLayer.push({ event: 'Hits Viewed' });
    }
    }
});

export default {
    data() {
    return {
        // ...
        middlewares: [insightsMiddleware]
    }
    },
}
</script>
```
</CodeGroup>