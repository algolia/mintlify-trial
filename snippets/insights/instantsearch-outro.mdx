## (Optional) Set up Personalization

For effective personalization, you need to identify users across sessions.
It's best to use an identifier from your authentication system after users signed in. For more information, see [User token](/guides/send-events/concepts/user-token/).

After getting the identifier from your system,
set it as the `authenticatedUserToken` parameter.

```js JavaScript
// Get a unique, pseudonymous identifier for signed-in users
const authenticatedUserToken = getUserTokenAfterSignIn();
window.aa("setAuthenticatedUserToken", authenticatedUserToken);
```

If you can't get persistent user identifiers from your system,
you can store the anonymous user token in a cookie **after obtaining user consent**.

```js JavaScript
// If user consented
aa("init", {
  partial: true,
  useCookies: true,
});
```

If you don't use persistent user identifiers,
a new anonymous user token is generated on every page refresh.

Personalization benefits from the same click and conversion events,
plus it can use view events to enrich user profiles.

Your InstantSearch components for the search results and category pages automatically collect view events.

To capture additional view events, such as on your homepage,
add this code:

```js JavaScript
window.aa("viewedObjectIDs", {
  index: "YourIndexName",
  eventName: "Items Viewed",
  objectIDs: ["objectID-1"],
});
```

  ## Working examples

- [InstantSearch.js](https://codesandbox.io/s/github/algolia/doc-code-samples/tree/master/instantsearch.js/algolia-insights) ([Source Code](https://github.com/algolia/doc-code-samples/tree/master/instantsearch.js/algolia-insights))
- [React InstantSearch](https://codesandbox.io/s/github/algolia/doc-code-samples/tree/master/react-instantsearch/algolia-insights) ([Source Code](https://github.com/algolia/doc-code-samples/tree/master/react-instantsearch/algolia-insights))
- [Vue InstantSearch](https://codesandbox.io/s/github/algolia/doc-code-samples/tree/master/vue-instantsearch/algolia-insights) ([Source Code](https://github.com/algolia/doc-code-samples/tree/master/vue-instantsearch/algolia-insights))

### Adding events to a React InstantSearch app

<iframe
  width="560"
  height="315"
  src="https://www.youtube.com/embed/UPOc9pIuvk4"
  title="'Adding events to an InstantSearch app"
  frameborder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
  allowfullscreen
></iframe>